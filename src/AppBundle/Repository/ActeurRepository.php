<?php

namespace AppBundle\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * ActeurRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class ActeurRepository extends EntityRepository
{

    public function findSeries($id)
    {
        return $this->getEntityManager()
                        ->createQuery('SELECT s FROM AppBundle:Serie s JOIN s.roles r WHERE r.acteur = :id')->setParameter('id', $id)
                        ->getResult();
    }

    public function collaborationActeur($id)
    {
        return $this->getEntityManager()
                        ->createQuery('SELECT a FROM AppBundle:Acteur a JOIN a.roles r WHERE r.serie = :id GROUP BY a.nom')->setParameter('id', $id)
                        ->getResult();
    }

    public function popularSerie($id)
    {
        return $this->getEntityManager()
                        ->createQuery('Select s FROM AppBundle:Serie s JOIN s.roles r WHERE s.noteSerie >=4 AND r.acteur = :id')->setParameter('id', $id)
                        ->getResult();
    }

    public function findActeursNotActive()
    {
        return $this->getEntityManager()
                        ->createQuery('SELECT a FROM AppBundle:Acteur a WHERE a.valide = false')
                        ->getResult();
    }

    public function findActeursActive()
    {
        return $this->getEntityManager()
                        ->createQuery('SELECT a FROM AppBundle:Acteur a WHERE a.valide = true')
                        ->getResult();
    }

}
